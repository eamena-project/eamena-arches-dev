window.csv2geojson=function(r){var e={};function t(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:n})},t.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s=2)}([function(r,e,t){"use strict";function n(r){return new Function("d","return {"+r.map(function(r,e){return JSON.stringify(r)+": d["+e+"]"}).join(",")+"}")}t.r(e);var o=function(r){var e=new RegExp('["'+r+"\n]"),t=r.charCodeAt(0);function o(r,e){var n,o,u={},i={},a=[],s=r.length,l=0,c=0;function f(){if(l>=s)return i;if(o)return o=!1,u;var e,n=l;if(34===r.charCodeAt(n)){for(var a=n;a++<s;)if(34===r.charCodeAt(a)){if(34!==r.charCodeAt(a+1))break;++a}return l=a+2,13===(e=r.charCodeAt(a+1))?(o=!0,10===r.charCodeAt(a+2)&&++l):10===e&&(o=!0),r.slice(n+1,a).replace(/""/g,'"')}for(;l<s;){var c=1;if(10===(e=r.charCodeAt(l++)))o=!0;else if(13===e)o=!0,10===r.charCodeAt(l)&&(++l,++c);else if(e!==t)continue;return r.slice(n,l-c)}return r.slice(n)}for(;(n=f())!==i;){for(var p=[];n!==u&&n!==i;)p.push(n),n=f();e&&null==(p=e(p,c++))||a.push(p)}return a}function u(e){return e.map(i).join(r)}function i(r){return null==r?"":e.test(r+="")?'"'+r.replace(/\"/g,'""')+'"':r}return{parse:function(r,e){var t,u,i=o(r,function(r,o){if(t)return t(r,o-1);u=r,t=e?function(r,e){var t=n(r);return function(n,o){return e(t(n),o,r)}}(r,e):n(r)});return i.columns=u,i},parseRows:o,format:function(e,t){return null==t&&(t=function(r){var e=Object.create(null),t=[];return r.forEach(function(r){for(var n in r)n in e||t.push(e[n]=n)}),t}(e)),[t.map(i).join(r)].concat(e.map(function(e){return t.map(function(r){return i(e[r])}).join(r)})).join("\n")},formatRows:function(r){return r.map(u).join("\n")}}},u=o(","),i=u.parse,a=u.parseRows,s=u.format,l=u.formatRows,c=o("\t"),f=c.parse,p=c.parseRows,d=c.format,v=c.formatRows;t.d(e,"dsvFormat",function(){return o}),t.d(e,"csvParse",function(){return i}),t.d(e,"csvParseRows",function(){return a}),t.d(e,"csvFormat",function(){return s}),t.d(e,"csvFormatRows",function(){return l}),t.d(e,"tsvParse",function(){return f}),t.d(e,"tsvParseRows",function(){return p}),t.d(e,"tsvFormat",function(){return d}),t.d(e,"tsvFormatRows",function(){return v})},function(r,e){function t(r,e){var t=n(r,e);return t.whole+"° "+(t.minutes?t.minutes+"' ":"")+(t.seconds?t.seconds+'" ':"")+t.dir}function n(r,e){var t=({lat:["N","S"],lon:["E","W"]}[e]||"")[r>=0?0:1],n=Math.abs(r),o=Math.floor(n),u=60*(n-o),i=Math.floor(u);return{whole:o,minutes:i,seconds:Math.floor(60*(u-i)),dir:t}}function o(r,e,t){if(e||(e="NSEW"),"string"!=typeof r)return{val:null,regex:t};var n=(t=t||/[\s\,]*([\-|\—|\―]?[0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|"|”|″) *)?([NSEW])?/gi).exec(r);return n?n[4]&&-1===e.indexOf(n[4])?{val:null,regex:t}:{val:((n[1]?parseFloat(n[1]):0)+(n[2]?parseFloat(n[2])/60:0)+(n[3]?parseFloat(n[3])/3600:0))*(n[4]&&"S"===n[4]||"W"===n[4]?-1:1),regex:t,raw:n[0],dim:n[4]}:{val:null,regex:t}}r.exports=function(r,e){return o(r,e).val},r.exports.pair=function(r,e){var t=o(r=r.trim(),e);if(null===t.val)return null;var n=o(r,e,t.regex);if(null===n.val)return null;if(t.raw+n.raw!==r)return null;return t.dim?function(r,e,t){if("N"===t||"S"===t)return[r,e];if("W"===t||"E"===t)return[e,r]}(t.val,n.val,t.dim):[t.val,n.val]},r.exports.format=t,r.exports.formatPair=function(r){return t(r.lat,"lat")+" "+t(r.lon,"lon")},r.exports.coordToDMS=n},function(r,e,t){"use strict";var n=t(0),o=t(1),u=/(Lat)(itude)?/gi,i=/(L)(on|ng)(gitude)?/i;function a(r,e){var t,n,o;for(var u in r)(n=u.match(e))&&(!t||n[0].length/u.length>o)&&(o=n[0].length/u.length,t=u);return t}function s(r){return a(r,u)}function l(r){return a(r,i)}function c(r){return"object"==typeof r?Object.keys(r).length:0}function f(r){var e=[];return[",",";","\t","|"].forEach(function(t){var o=n.dsvFormat(t).parse(r);if(o.length>=1){for(var u=c(o[0]),i=0;i<o.length;i++)if(c(o[i])!==u)return;e.push({delimiter:t,arity:Object.keys(o[0]).length})}}),e.length?e.sort(function(r,e){return e.arity-r.arity})[0].delimiter:null}r.exports={isLon:function(r){return!!r.match(i)},isLat:function(r){return!!r.match(u)},guessLatHeader:s,guessLonHeader:l,csv:n.csvParse,tsv:n.tsvParse,dsv:n,auto:function(r){var e=f(r);return e?function(r){return delete r.columns,r}(n.dsvFormat(e).parse(r)):null},csv2geojson:function(r,e,t){t||(t=e,e={}),e.delimiter=e.delimiter||",";var u=e.latfield||"",i=e.lonfield||"",a=e.crs||"",c=[],p={type:"FeatureCollection",features:c};if(""!==a&&(p.crs={type:"name",properties:{name:a}}),"auto"!==e.delimiter||"string"!=typeof r||(e.delimiter=f(r),e.delimiter)){var d="string"==typeof r?n.dsvFormat(e.delimiter).parse(r):r;if(d.length){var v,m=[];if(u||(u=s(d[0])),i||(i=l(d[0])),u&&i){for(v=0;v<d.length;v++)if(void 0!==d[v][i]&&void 0!==d[v][u]){var g,h,y,F=d[v][i],w=d[v][u];(y=o(F,"EW"))&&(F=y),(y=o(w,"NS"))&&(w=y),g=parseFloat(F),h=parseFloat(w),isNaN(g)||isNaN(h)?m.push({message:"A row contained an invalid value for latitude or longitude",row:d[v],index:v}):(e.includeLatLon||(delete d[v][i],delete d[v][u]),c.push({type:"Feature",properties:d[v],geometry:{type:"Point",coordinates:[parseFloat(g),parseFloat(h)]}}))}t(m.length?m:null,p)}else{for(v=0;v<d.length;v++)c.push({type:"Feature",properties:d[v],geometry:null});t(m.length?m:null,p)}}else t(null,p)}else t({type:"Error",message:"Could not autodetect delimiter"})},toLine:function(r){for(var e=r.features,t={type:"Feature",geometry:{type:"LineString",coordinates:[]}},n=0;n<e.length;n++)t.geometry.coordinates.push(e[n].geometry.coordinates);return t.properties=e.reduce(function(r,e){for(var t in e.properties)r[t]||(r[t]=[]),r[t].push(e.properties[t]);return r},{}),{type:"FeatureCollection",features:[t]}},toPolygon:function(r){for(var e=r.features,t={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},n=0;n<e.length;n++)t.geometry.coordinates[0].push(e[n].geometry.coordinates);return t.properties=e.reduce(function(r,e){for(var t in e.properties)r[t]||(r[t]=[]),r[t].push(e.properties[t]);return r},{}),{type:"FeatureCollection",features:[t]}}}}]);
//# sourceMappingURL=csv2geojson-prod.js.map